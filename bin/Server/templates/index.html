<html>
<head>
    <title>Karkinos Reverse Shell</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <meta name=”viewport” content=”width =device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body class="bg-dark text-white">
    <!-- Header -->
    <header>
        <div class="row p-5">
            <div class="col-md">
                <div class="container-fluid pb-3">
                    <h1 class="text-white">Reverse Shell Handling</h1>
                </div>
            </div>
        </div>
    </header>
    <!-- Main -->
    <main class="text-white">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md ml-5">
                    <!-- Shell -->
                    <form method="POST" action="/">
                        <div class="form-group">
                            <p class="text-white">Output:</p>
                            <textarea class="terminal" id="out" style="min-width: 100%" rows="15" class="p7">{{ out }}</textarea>
                        </div>
                        <label for="command" class="text-white">Command:</label>
                        <div class="input-group">
                            <input type="text" id="command" name="command" class="terminal form-control" autocomplete="off" spellcheck="false">
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-success" id="go">Go</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="reset" class="btn btn-warning mt-2 btn-block" value="Clear">
                        </div>
                    </form>
                </div>
                <!-- Connect -->
                <div class="col-md ml-5">
                    <form method="POST" action="/config">
                        <p class="text-white">Listener Configuration:</p>
                        <div class="form-group">
                            <label for="port" class="text-white">Port:</label>
                            <input type="number" id="port" name="port" class="terminal form-control" placeholder="Port to listen on" required>
                        </div>
                        <p id="startMsg" class="mt-4">{{ startMsg }}</p>
                        <div class="form-group">
                            <button type="submit" class="btn btn-outline-success btn-block py-5" id="start"><h1>Start</h1></button>
                            <button type="button"  class="btn btn-outline-warning btn-block py-2" id="shutdown"><b>Shutdown Server</b></button>
                            <p id="shutdownMsg" class="text-danger mt-4"></p>
                            <h2 class="mt-4">Info:</h2>
                            <ul class="tips">
                                <li>Type "clear" to clear the terminal</li>
                                <li>Type "exit" to close the connection</li>
                                <li>You can start listening again at any time, even on the same port</li>
                                <li>Listeners set up on the same port will recieve connections by turn; i.e first come fist serve</li>
                                <li>Facing problems? Restarting the server might help :)</li>
                            </ul>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-copyright text-white text-center mt-5">
            <div class="row justify-content-center mb-4">
                <p>&copy; 2020<a href="https://github.com/helich0pper" class="text-green" target="_blank"> helich0pper</a></p>    
            </div>
        </div>
    </footer>
    <script>
        var textarea = document.getElementById('out');
        textarea.scrollTop = textarea.scrollHeight;
        var input = document.getElementById('command');
        input.focus();
    </script>
    <script type="text/javascript" src={{url_for('static', filename='js/reverse.js')}}></script>
</body>
</html>